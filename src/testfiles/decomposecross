qreg q[20];

module bcnot(q1,q2){
    choice ([0,1]){
        0:  barrier(q1,q2);
            cnot(q1,q2);

        1:  cnot(q1,q2);
    }
}

bcnot(q[0],q[1]);
case (c[0]){
    0:  bcnot(q[2],q[3]);
    1:  cnot(q[0],q[1]);
}