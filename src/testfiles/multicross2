qreg q[10];
creg r[1];
fcho c1,c2,c3,c4 = {0, 1};

h(q[0]);
measure(q[0],r[0]);

module twocnot(q0,q1,q2,c){
    choice (c) {
        0:  cx(q1,q0);
            cx(q2,q0);
        1:  cx(q2,q0);
            cx(q1,q0);
    }    
}

module citcuit1(q0,q1,q2,c){
        twocnot(q0,q1,q2,c);
        rz(3.14/2, q0);
        twocnot(q0,q1,q2,c); 
}

module circuit2(q0,q1,q2,c){
        twocnot(q0,q1,q2,c);
        rz(3.14/4, q0);
        twocnot(q0,q1,q2,c); 
}

choice (c1){
    0:  circuit1(q[1], q[2], q[3], c3);

    1:  circuit1(q[7], q[8], q[9], c4);
}

choice (c2){
    0:  circuit2(q[1], q[2], q[3], c3);

    1:  circuit2(q[7], q[8], q[9], c4);
}